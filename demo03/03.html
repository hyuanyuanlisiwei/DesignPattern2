<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>创建型设计模式--抽象工厂模式</title>
</head>
<body>

</body>
</html>
<script>
    //ES5
    //定义：通过对类的工厂抽象使其业务用于对产品类簇的创建，而不负责创建某一类产品的实例。

    //汽车抽象类
    var Car=function () {};
    Car.prototype={
        getPrice:function () {
            return new Error("抽象方法不能调用");
        },
        getSpeed:function () {
            return new Error("抽象方法不能调用");
        }
    };

    //抽象工厂方法
    var VehicleFactory=function (subType,superType) {
        if(typeof VehicleFactory[superType]==='function'){
            //位于subType和superType中的过渡类
            function F() {
                this.name="中间过渡类";
            };
            F.prototype=new VehicleFactory[superType];
            subType.constructor=subType;
            subType.prototype=new F();
        }else{
            throw new Error("未创建该抽象类");
        }
    }

    //小汽车抽象类
    VehicleFactory.Car=function () {
        this.type='Car';
    }
    VehicleFactory.Car.prototype={
        getPrice:function () {
            return new Error("抽象方法不能调用");
        },
        getSpeed:function () {
            return new Error("抽象方法不能调用");
        }
    };

    //公共汽车抽象类
    VehicleFactory.Bus=function () {
        this.type="Bus";
    }
    VehicleFactory.Bus.prototype={
        getPrice:function(){
            return new Error("抽象方法不能调用");
        },
        getSpeed:function(){
            return new Error("抽象方法不能调用");
        }
    }

    //宝马汽车子类
    var BMW=function (price,speed) {
        this.price=price;
        this.speed=speed;
    }
    //抽象工厂实现对Car抽象类的继承
    VehicleFactory(BMW,"Car");
    BMW.prototype.getPrice=function () {
        return this.price;
    }
    BMW.prototype.getSpeed=function () {
        return this.speed;
    }

    //公共汽车子类
    var YuTong=function (price,trainLoad) {
        this.price=price;
        this.trainLoad=trainLoad;
    }
    //抽象工厂实现对Bus抽象类的继承.
    VehicleFactory(YuTong,"Bus");
    YuTong.prototype.getPrice=function () {
        return this.price;
    }
    YuTong.prototype.getTrainLoad=function () {
        return this.trainLoad;
    }

    //测试代码
    var bmw=new BMW(1000,200);
    console.log(bmw.getPrice());
    console.log(bmw.getSpeed());

    var yutong=new YuTong(2000,300);
    console.log(yutong.getPrice());
    console.log(yutong.getTrainLoad());

    console.log(bmw);
    console.log(yutong);

</script>
<script>
    //ES6
    //汽车抽象工厂.
    class Car2{
        constructor(){
            this.type="Car";
        }
        getPrice(){
            return new Error("抽象方法不能调用");
        }
        getSpeed(){
            return new Error("抽象方法不能调用");
        }
    }
    //汽车子类
    class BMW2 extends Car2{
        constructor(price,speed){
            super();
            this.price=price;
            this.speed=speed;
        }
        getPrice(){
            return this.price;
        }
        getSpeed(){
            return this.speed;
        }
    }

    let bmw2=new BMW2(1000,200);
    console.log(bmw2.getPrice());
    console.log(bmw2.getSpeed());

    console.log(bmw2);


</script>
